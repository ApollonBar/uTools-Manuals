<div class="header">
<div class="subTitle">
     compact1, compact2, compact3 
   </div>
<div class="subTitle">
     java.util.concurrent 
   </div>
<h2 class="title" title="Class ExecutorCompletionService">Class ExecutorCompletionService&lt;V&gt;</h2>
</div><div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../java/lang/Object.html" title="class in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>java.util.concurrent.ExecutorCompletionService&lt;V&gt;</li>
</ul> </li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>
         All Implemented Interfaces: 
       </dt>
<dd>
<span><a href="../../../java/util/concurrent/CompletionService.html" title="java.util.concurrent中的接口">CompletionService</a> &lt;V&gt;</span>
</dd>
</dl>
<hr/> <br/> <pre>public class <span class="typeNameLabel">ExecutorCompletionService&lt;V&gt;</span>
extends <a href="../../../java/lang/Object.html" title="class in java.lang">Object</a>
implements <a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;V&gt;</pre>
<div class="block">
<span>A <a href="../../../java/util/concurrent/CompletionService.html" title="java.util.concurrent中的接口"><code>CompletionService</code></a>使用提供的<a href="../../../java/util/concurrent/Executor.html" title="java.util.concurrent中的接口"><code>Executor</code></a>执行任务。</span>
<span>此类安排提交的任务完成后，可以使用<code>take</code>队列。</span>
<span>该类具有足够的轻量级，适合于处理任务组时的瞬时使用。</span>
<p> <span><b>用法示例。</b></span> <span>假设您有一组解决方案为某个问题，每个返回一些类型的值<code>Result</code> ，并且想要并发运行它们，处理其中返回非空值的结果，方法<code>use(Result r)</code> 。</span> <span>你可以这样写：</span> </p>
<pre>  <span><code> void solve(Executor e, Collection&lt;Callable&lt;Result&gt;&gt; solvers) throws InterruptedException, ExecutionException { CompletionService&lt;Result&gt; ecs = new ExecutorCompletionService&lt;Result&gt;(e); for (Callable&lt;Result&gt; s : solvers) ecs.submit(s); int n = solvers.size(); for (int i = 0; i &lt; n; ++i) { Result r = ecs.take().get(); if (r != null) use(r); } }</code></span> </pre>
<span>假设您希望使用该组任务的第一个非空结果，忽略遇到任何异常，并在第一个准备就绪时取消所有其他任务：</span>
<pre>  <span><code> void solve(Executor e, Collection&lt;Callable&lt;Result&gt;&gt; solvers) throws InterruptedException { CompletionService&lt;Result&gt; ecs = new ExecutorCompletionService&lt;Result&gt;(e); int n = solvers.size(); List&lt;Future&lt;Result&gt;&gt; futures = new ArrayList&lt;Future&lt;Result&gt;&gt;(n); Result result = null; try { for (Callable&lt;Result&gt; s : solvers) futures.add(ecs.submit(s)); for (int i = 0; i &lt; n; ++i) { try { Result r = ecs.take().get(); if (r != null) { result = r; break; } } catch (ExecutionException ignore) {} } } finally { for (Future&lt;Result&gt; f : futures) f.cancel(true); } if (result != null) use(result); }</code></span> </pre>
</div> </li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!-- --> </a> <h3>构造方法摘要</h3>
<table border="0" cellpadding="3" cellspacing="0" class="memberSummary" summary="Constructor Summary table, listing constructors, and an explanation">
<caption>
<span>构造方法</span>
<span class="tabEnd"> </span>
</caption>
<tbody>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#ExecutorCompletionService-java.util.concurrent.Executor-">ExecutorCompletionService</a></span>(<a href="../../../java/util/concurrent/Executor.html" title="interface in java.util.concurrent">Executor</a> executor)</code>
<div class="block">
<span>使用提供的执行程序创建一个ExecutorCompletionService来执行基本任务，一个<a href="../../../java/util/concurrent/LinkedBlockingQueue.html" title="java.util.concurrent中的类"><code>LinkedBlockingQueue</code></a>作为完成队列。</span>
</div> </td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#ExecutorCompletionService-java.util.concurrent.Executor-java.util.concurrent.BlockingQueue-">ExecutorCompletionService</a></span>(<a href="../../../java/util/concurrent/Executor.html" title="interface in java.util.concurrent">Executor</a> executor, <a href="../../../java/util/concurrent/BlockingQueue.html" title="interface in java.util.concurrent">BlockingQueue</a>&lt;<a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;&gt; completionQueue)</code>
<div class="block">
              使用提供的执行程序创建一个ExecutorCompletionService，用于执行基本任务，并将提供的队列作为其完成队列。 
            </div> </td>
</tr>
</tbody>
</table> </li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!-- --> </a> <h3>方法摘要</h3>
<table border="0" cellpadding="3" cellspacing="0" class="memberSummary" summary="Method Summary table, listing methods, and an explanation">
<caption>
<span class="activeTableTab" id="t0"><span>所有方法</span><span class="tabEnd"> </span></span>
<span class="tableTab" id="t2"><span><a href="javascript:show(2);">接口方法</a></span><span class="tabEnd"> </span></span>
<span class="tableTab" id="t4"><span><a href="javascript:show(8);">具体的方法</a></span><span class="tabEnd"> </span></span>
</caption>
<tbody>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#poll--">poll</a></span>()</code>
<div class="block">
              检索并删除代表下一个完成的任务的未来，或者如果没有任何的话将 
             <code>null</code> 。 
            </div> </td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#poll-long-java.util.concurrent.TimeUnit-">poll</a></span>(long timeout, <a href="../../../java/util/concurrent/TimeUnit.html" title="enum in java.util.concurrent">TimeUnit</a> unit)</code>
<div class="block">
              检索并删除表示下一个完成的任务的未来，如果还没有，则等待必要时直到指定的等待时间。 
            </div> </td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#submit-java.util.concurrent.Callable-">submit</a></span>(<a href="../../../java/util/concurrent/Callable.html" title="interface in java.util.concurrent">Callable</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; task)</code>
<div class="block">
              提交值返回任务以执行，并返回代表任务待处理结果的Future。 
            </div> </td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#submit-java.lang.Runnable-V-">submit</a></span>(<a href="../../../java/lang/Runnable.html" title="interface in java.lang">Runnable</a> task, <a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a> result)</code>
<div class="block">
              提交一个可运行的任务执行，并返回一个表示该任务的未来。 
            </div> </td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../java/util/concurrent/ExecutorCompletionService.html#take--">take</a></span>()</code>
<div class="block">
              检索并删除代表下一个完成任务的未来，等待是否还没有任务。 
            </div> </td>
</tr>
</tbody>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!-- --> </a> <h3>Methods inherited from class java.lang.<a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></h3> <code><a href="../../../java/lang/Object.html#clone--">clone</a>, <a href="../../../java/lang/Object.html#equals-java.lang.Object-">equals</a>, <a href="../../../java/lang/Object.html#finalize--">finalize</a>, <a href="../../../java/lang/Object.html#getClass--">getClass</a>, <a href="../../../java/lang/Object.html#hashCode--">hashCode</a>, <a href="../../../java/lang/Object.html#notify--">notify</a>, <a href="../../../java/lang/Object.html#notifyAll--">notifyAll</a>, <a href="../../../java/lang/Object.html#toString--">toString</a>, <a href="../../../java/lang/Object.html#wait--">wait</a>, <a href="../../../java/lang/Object.html#wait-long-">wait</a>, <a href="../../../java/lang/Object.html#wait-long-int-">wait</a></code></li>
</ul> </li>
</ul> </li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!-- --> </a> <h3>构造方法详细信息</h3> <a name="ExecutorCompletionService-java.util.concurrent.Executor-">
<!-- --> </a>
<ul class="blockList">
<li class="blockList"> <h4>ExecutorCompletionService</h4> <pre>public ExecutorCompletionService(<a href="../../../java/util/concurrent/Executor.html" title="interface in java.util.concurrent">Executor</a> executor)</pre>
<div class="block">
<span>使用提供的执行程序创建一个ExecutorCompletionService，用于执行基本任务，一个<a href="../../../java/util/concurrent/LinkedBlockingQueue.html" title="java.util.concurrent中的类"><code>LinkedBlockingQueue</code></a>作为完成队列。</span>
</div>
<dl>
<dt>
<span class="paramLabel">参数</span>
</dt>
<dd>
<code>executor</code> - 执行者使用 
           </dd>
<dt>
<span class="throwsLabel">异常</span>
</dt>
<dd>
<code><a href="../../../java/lang/NullPointerException.html" title="class in java.lang">NullPointerException</a></code> - 如果执行者是 
            <code>null</code>
</dd>
</dl> </li>
</ul> <a name="ExecutorCompletionService-java.util.concurrent.Executor-java.util.concurrent.BlockingQueue-">
<!-- --> </a>
<ul class="blockListLast">
<li class="blockList"> <h4>ExecutorCompletionService</h4> <pre>public ExecutorCompletionService(<a href="../../../java/util/concurrent/Executor.html" title="interface in java.util.concurrent">Executor</a> executor,
                                 <a href="../../../java/util/concurrent/BlockingQueue.html" title="interface in java.util.concurrent">BlockingQueue</a>&lt;<a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;&gt; completionQueue)</pre>
<div class="block">
            使用提供的执行程序创建一个ExecutorCompletionService，用于执行基本任务，并将提供的队列作为其完成队列。 
          </div>
<dl>
<dt>
<span class="paramLabel">参数</span>
</dt>
<dd>
<code>executor</code> - 执行者使用 
           </dd>
<dd>
<span><code>completionQueue</code> - 用作完成队列的队列通常用于此服务使用。</span>
<span>此队列被视为无界-失败的尝试<code>Queue.add</code>操作已完成任务的原因他们不要检索。</span>
</dd>
<dt>
<span class="throwsLabel">异常</span>
</dt>
<dd>
<code><a href="../../../java/lang/NullPointerException.html" title="class in java.lang">NullPointerException</a></code> - 如果executor或completionQueue是 
            <code>null</code>
</dd>
</dl> </li>
</ul> </li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!-- --> </a> <h3>方法详细信息</h3> <a name="submit-java.util.concurrent.Callable-">
<!-- --> </a>
<ul class="blockList">
<li class="blockList"> <h4>submit</h4> <pre>public <a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; submit(<a href="../../../java/util/concurrent/Callable.html" title="interface in java.util.concurrent">Callable</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; task)</pre>
<div class="block">
<span class="descfrmTypeLabel">说明从界面复制： <code><a href="../../../java/util/concurrent/CompletionService.html#submit-java.util.concurrent.Callable-">CompletionService</a></code></span>
</div>
<div class="block">
<span>提交值返回任务以执行，并返回代表任务待处理结果的Future。</span>
<span>完成后，可以采取或轮询此任务。</span>
</div>
<dl>
<dt>
<span class="overrideSpecifyLabel">Specified by:</span>
</dt>
<dd>
<code><a href="../../../java/util/concurrent/CompletionService.html#submit-java.util.concurrent.Callable-">submit</a></code>在界面 
            <code><a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code>
</dd>
<dt>
<span class="paramLabel">参数</span>
</dt>
<dd>
<code>task</code> - 要提交的任务 
           </dd>
<dt>
<span class="returnLabel">结果</span>
</dt>
<dd>
             一个未来的代表，待完成任务 
           </dd>
</dl> </li>
</ul> <a name="submit-java.lang.Runnable-java.lang.Object-">
<!-- --> </a><a name="submit-java.lang.Runnable-V-">
<!-- --> </a>
<ul class="blockList">
<li class="blockList"> <h4>submit</h4> <pre>public <a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; submit(<a href="../../../java/lang/Runnable.html" title="interface in java.lang">Runnable</a> task,
                        <a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a> result)</pre>
<div class="block">
<span class="descfrmTypeLabel">说明从界面： <code><a href="../../../java/util/concurrent/CompletionService.html#submit-java.lang.Runnable-V-">CompletionService</a></code>复制</span>
</div>
<div class="block">
<span>提交一个可运行的任务执行，并返回一个表示该任务的未来。</span>
<span>完成后，可以采取或轮询此任务。</span>
</div>
<dl>
<dt>
<span class="overrideSpecifyLabel">Specified by:</span>
</dt>
<dd>
<code><a href="../../../java/util/concurrent/CompletionService.html#submit-java.lang.Runnable-V-">submit</a></code>在界面 
            <code><a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code>
</dd>
<dt>
<span class="paramLabel">参数</span>
</dt>
<dd>
<code>task</code> - 要提交的任务 
           </dd>
<dd>
<code>result</code> - 成功完成后返回的结果 
           </dd>
<dt>
<span class="returnLabel">结果</span>
</dt>
<dd>
             未来代表待完成的任务，其 
            <code>get()</code>方法将在完成后返回给定的结果值 
           </dd>
</dl> </li>
</ul> <a name="take--">
<!-- --> </a>
<ul class="blockList">
<li class="blockList"> <h4>take</h4> <pre>public <a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; take()
               throws <a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></pre>
<div class="block">
<span class="descfrmTypeLabel">描述从接口： <code><a href="../../../java/util/concurrent/CompletionService.html#take--">CompletionService</a></code>复制</span>
</div>
<div class="block">
            检索并删除代表下一个完成任务的未来，等待是否还没有任务。 
          </div>
<dl>
<dt>
<span class="overrideSpecifyLabel">Specified by:</span>
</dt>
<dd>
<code><a href="../../../java/util/concurrent/CompletionService.html#take--">take</a></code>在接口 
            <code><a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code>
</dd>
<dt>
<span class="returnLabel">结果</span>
</dt>
<dd>
             未来代表下一个完成的任务 
           </dd>
<dt>
<span class="throwsLabel">异常</span>
</dt>
<dd>
<code><a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - 如果等待中断 
           </dd>
</dl> </li>
</ul> <a name="poll--">
<!-- --> </a>
<ul class="blockList">
<li class="blockList"> <h4>poll</h4> <pre>public <a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; poll()</pre>
<div class="block">
<span class="descfrmTypeLabel">说明从界面复制： <code><a href="../../../java/util/concurrent/CompletionService.html#poll--">CompletionService</a></code></span>
</div>
<div class="block">
            检索并删除代表下一个完成的任务的未来，或者如果没有任何一个任务则 
           <code>null</code> 。 
          </div>
<dl>
<dt>
<span class="overrideSpecifyLabel">Specified by:</span>
</dt>
<dd>
<code><a href="../../../java/util/concurrent/CompletionService.html#poll--">poll</a></code>在界面 
            <code><a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code>
</dd>
<dt>
<span class="returnLabel">结果</span>
</dt>
<dd>
             未来代表下一个完成的任务，或 
            <code>null</code>如果没有一个 
           </dd>
</dl> </li>
</ul> <a name="poll-long-java.util.concurrent.TimeUnit-">
<!-- --> </a>
<ul class="blockListLast">
<li class="blockList"> <h4>poll</h4> <pre>public <a href="../../../java/util/concurrent/Future.html" title="interface in java.util.concurrent">Future</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt; poll(long timeout,
                      <a href="../../../java/util/concurrent/TimeUnit.html" title="enum in java.util.concurrent">TimeUnit</a> unit)
               throws <a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></pre>
<div class="block">
<span class="descfrmTypeLabel">说明从界面复制： <code><a href="../../../java/util/concurrent/CompletionService.html#poll-long-java.util.concurrent.TimeUnit-">CompletionService</a></code></span>
</div>
<div class="block">
            检索并删除表示下一个完成的任务的未来，如果还没有，则等待必要时直到指定的等待时间。 
          </div>
<dl>
<dt>
<span class="overrideSpecifyLabel">Specified by:</span>
</dt>
<dd>
<code><a href="../../../java/util/concurrent/CompletionService.html#poll-long-java.util.concurrent.TimeUnit-">poll</a></code>在接口 
            <code><a href="../../../java/util/concurrent/CompletionService.html" title="interface in java.util.concurrent">CompletionService</a>&lt;<a href="../../../java/util/concurrent/ExecutorCompletionService.html" title="type parameter in ExecutorCompletionService">V</a>&gt;</code>
</dd>
<dt>
<span class="paramLabel">参数</span>
</dt>
<dd>
<code>timeout</code> - 放弃之前等待多久，以 
            <code>unit</code>为单位 
           </dd>
<dd>
<code>unit</code> - a 
            <code>TimeUnit</code>确定如何解释 
            <code>timeout</code>参数 
           </dd>
<dt>
<span class="returnLabel">结果</span>
</dt>
<dd>
             未来代表下一个完成的任务或 
            <code>null</code>如果指定的等待时间在一个存在之前经过 
           </dd>
<dt>
<span class="throwsLabel">异常</span>
</dt>
<dd>
<code><a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if interrupted while waiting 
           </dd>
</dl> </li>
</ul> </li>
</ul> </li>
</ul>
</div>
</div>